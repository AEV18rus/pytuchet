# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –£–¥–∞–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–µ –º–µ—Å—è—Ü—ã

**–î–∞—Ç–∞**: 2025-11-26  
**–í–µ—Ä—Å–∏—è**: 2.5.1

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ "–∑–∞–∫—Ä—ã—Ç—ã—Ö" –º–µ—Å—è—Ü–∞—Ö. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–º–µ–Ω—ã –∏ –≤—ã–ø–ª–∞—Ç—ã –∑–∞ –ª—é–±–æ–π –ø–µ—Ä–∏–æ–¥, –≤–∫–ª—é—á–∞—è –ø—Ä–æ—à–ª—ã–µ –º–µ—Å—è—Ü—ã.

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### API –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤ (`master` —Ä–æ–ª—å):

1. **`/src/app/api/payouts/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã
   - ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—ã –≤ –ª—é–±–æ–π –º–µ—Å—è—Ü

2. **`/src/app/api/payouts/[id]/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã
   - ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞

3. **`/src/app/api/shifts/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–º–µ–Ω—ã
   - ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–º–µ–Ω—ã –≤ –ª—é–±–æ–π –º–µ—Å—è—Ü

4. **`/src/app/api/shifts/[id]/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–º–µ–Ω—ã
   - ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Å–º–µ–Ω—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞

### API –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (`admin` —Ä–æ–ª—å):

5. **`/src/app/api/admin/payouts/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - ‚úÖ –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—ã–ø–ª–∞—Ç—ã –≤ –ª—é–±–æ–π –º–µ—Å—è—Ü

6. **`/src/app/api/admin/payouts/[id]/route.ts`**
   - ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `getMonthStatus` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - ‚úÖ –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞

## üìä –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ `month_status`** - –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏)
- ‚úÖ **–§—É–Ω–∫—Ü–∏–∏ `getMonthStatus`, `setMonthClosed`, `isMonthClosed`** - –æ—Å—Ç–∞—é—Ç—Å—è –≤ `db.ts`
- ‚úÖ **API `/api/admin/month-status`** - –æ—Å—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ—Å—è—Ü–µ–≤** (`autoCloseFinishedMonths`) - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞–≤–∞–Ω—Å–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°—Ç–∞—Ç—É—Å –º–µ—Å—è—Ü–∞ –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏** - —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–ª–µ
2. **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
3. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –º–µ—Å—è—Ü–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ "–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö" –ø–µ—Ä–∏–æ–¥–æ–≤
4. **–ê–≤–∞–Ω—Å—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã** –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–µ—Å—è—Ü–∞

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ API endpoints —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å —Å–º–µ–Ω—ã –∑–∞ –ª—é–±–æ–π –º–µ—Å—è—Ü (—Ç–µ–∫—É—â–∏–π, –ø—Ä–æ—à–ª—ã–π, –±—É–¥—É—â–∏–π)
- ‚úÖ –£–¥–∞–ª—è—Ç—å —Å–º–µ–Ω—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—ã –∑–∞ –ª—é–±–æ–π –º–µ—Å—è—Ü
- ‚úÖ –£–¥–∞–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—è—Ü–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏

---

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
